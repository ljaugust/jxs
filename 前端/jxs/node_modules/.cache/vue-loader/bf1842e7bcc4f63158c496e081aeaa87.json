{"remainingRequest":"D:\\HBuilderX 项目\\jxs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderX 项目\\jxs\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderX 项目\\jxs\\src\\components\\Login.vue","mtime":1588731231783},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport API from '../api/api_admin';\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloading: false,\r\n\t\t\tloginMesg: {\r\n\t\t\t\tusername: 'lj',\r\n\t\t\t\tpassword: 'lj123'\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tusername: [{ required: true, message: '请输入账号', trigger: 'blur' }],\r\n\t\t\t\tpassword: [{ required: true, message: '请输入密码', trigger: 'blur' }]\r\n\t\t\t},\r\n\t\t\tchecked: true\r\n\t\t};\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tfindMesg() {\r\n\t\t\tAPI.findMesg().then(res => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tthis.$store.commit('addUser', res.userId);\r\n\t\t\t\t\tthis.$store.commit('addUserName', res.username);\r\n\t\t\t\t\tthis.$router.push({ path: '/home' });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tuserLogin() {\r\n\t\t\tlet that = this;\r\n\t\t\tthis.$refs.loginForm.validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t\tlet loginParams = new FormData();\r\n\t\t\t\t\tloginParams.append('client_id', 'jxs');\r\n\t\t\t\t\tloginParams.append('client_secret', 'secret');\r\n\t\t\t\t\tloginParams.append('grant_type', 'password');\r\n\t\t\t\t\tloginParams.append('scope', 'ROLE_USER');\r\n\t\t\t\t\tloginParams.append('username', this.loginMesg.username);\r\n\t\t\t\t\tloginParams.append('password', this.loginMesg.password);\r\n\t\t\t\t\tAPI.login(loginParams)\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tthat.loading = false;\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\tmessage: '登录成功！',\r\n\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\t\tthat.$store.commit('addToken', 'Bearer ' + res.access_token);\r\n\t\t\t\t\t\t\t\tconsole.log('查看token', that.$store.state.token);\r\n\t\t\t\t\t\t\t\tthat.findMesg();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.$message.error({\r\n\t\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\t\tmessage: res.msg || '登录失败',\r\n\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\tthat.loading = false;\r\n\t\t\t\t\t\t\tconsole.log('error');\r\n\t\t\t\t\t\t\tthat.$message.error({\r\n\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\tmessage: '请求出现异常',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div class=\"container\">\r\n\t\t<div class=\"loginTop\"></div>\r\n\t\t<div class=\"login_background\">\r\n\t\t\t<div class=\"login_container\">\r\n\t\t\t\t<div class=\"lo\">\r\n\t\t\t\t\t<el-form ref=\"loginForm\" :model=\"loginMesg\" :rules=\"loginMesg\" label-width=\"80px\" label-position=\"right\" class=\"login_from\">\r\n\t\t\t\t\t\t<span class=\"title\">账号登录</span>\r\n\r\n\t\t\t\t\t\t<el-form-item prop=\"username\" label=\"账号\">\r\n\t\t\t\t\t\t\t<el-input class=\"login_input\" type=\"text\" v-model=\"loginMesg.username\" auto-complete=\"off\" placeholder=\"账号\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t\t<el-form-item prop=\"password\" label=\"密码\">\r\n\t\t\t\t\t\t\t<el-input class=\"login_input\" type=\"password\" v-model=\"loginMesg.password\" auto-complete=\"off\" placeholder=\"密码\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t\t<el-checkbox v-model=\"checked\" checked class=\"remember\">记住密码</el-checkbox>\r\n\t\t\t\t\t\t\t<el-link href=\"https://element.eleme.io\" target=\"_blank\" class=\"forget\">忘记密码</el-link>\r\n\t\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t\t<el-form-item><el-button class=\"login_button\" type=\"primary\" @click.native.prevent=\"userLogin\" :loading=\"loading\">登录</el-button></el-form-item>\r\n\t\t\t\t\t</el-form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../api/api_admin';\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloading: false,\r\n\t\t\tloginMesg: {\r\n\t\t\t\tusername: 'lj',\r\n\t\t\t\tpassword: 'lj123'\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tusername: [{ required: true, message: '请输入账号', trigger: 'blur' }],\r\n\t\t\t\tpassword: [{ required: true, message: '请输入密码', trigger: 'blur' }]\r\n\t\t\t},\r\n\t\t\tchecked: true\r\n\t\t};\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tfindMesg() {\r\n\t\t\tAPI.findMesg().then(res => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tthis.$store.commit('addUser', res.userId);\r\n\t\t\t\t\tthis.$store.commit('addUserName', res.username);\r\n\t\t\t\t\tthis.$router.push({ path: '/home' });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tuserLogin() {\r\n\t\t\tlet that = this;\r\n\t\t\tthis.$refs.loginForm.validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t\tlet loginParams = new FormData();\r\n\t\t\t\t\tloginParams.append('client_id', 'jxs');\r\n\t\t\t\t\tloginParams.append('client_secret', 'secret');\r\n\t\t\t\t\tloginParams.append('grant_type', 'password');\r\n\t\t\t\t\tloginParams.append('scope', 'ROLE_USER');\r\n\t\t\t\t\tloginParams.append('username', this.loginMesg.username);\r\n\t\t\t\t\tloginParams.append('password', this.loginMesg.password);\r\n\t\t\t\t\tAPI.login(loginParams)\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tthat.loading = false;\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\tmessage: '登录成功！',\r\n\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\t\tthat.$store.commit('addToken', 'Bearer ' + res.access_token);\r\n\t\t\t\t\t\t\t\tconsole.log('查看token', that.$store.state.token);\r\n\t\t\t\t\t\t\t\tthat.findMesg();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.$message.error({\r\n\t\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\t\tmessage: res.msg || '登录失败',\r\n\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\tthat.loading = false;\r\n\t\t\t\t\t\t\tconsole.log('error');\r\n\t\t\t\t\t\t\tthat.$message.error({\r\n\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\tmessage: '请求出现异常',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container {\r\n\tposition: absolute;\r\n\ttop: 0px;\r\n\tbottom: 0px;\r\n\twidth: 100%;\r\n\r\n\t.loginTop {\r\n\t\twidth: 1030px;\r\n\t\theight: 116px;\r\n\t\tmargin: 5px auto;\r\n\t\tmargin-bottom: 0px;\r\n\t}\r\n\r\n\t.login_background {\r\n\t\twidth: 100%;\r\n\t\theight: 510px;\r\n\t\tbackground: url(../assets/login.png) center no-repeat;\r\n\t\tbackground-size: auto 100%;\r\n\r\n\t\t.login_container {\r\n\t\t\twidth: 1333px;\r\n\t\t\tmargin: 0 auto;\r\n\r\n\t\t\t.lo {\r\n\t\t\t\twidth: 500px;\r\n\t\t\t\theight: 350px;\r\n\t\t\t\tborder: 1px solid #c6c6c6;\r\n\t\t\t\tborder-top: 1px solid #c6c6c6;\r\n\t\t\t\tfloat: right;\r\n\t\t\t\tmargin: 80px auto 0;\r\n\t\t\t\tbackground: #f5f5dc;\r\n\r\n\t\t\t\t.title {\r\n\t\t\t\t\tmargin: 15px auto 40px auto;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tcolor: #505458;\r\n\t\t\t\t\tfont-size: 22px;\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.login_input {\r\n\t\t\t\t\twidth: 380px;\r\n\t\t\t\t\tfloat: left;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.remember {\r\n\t\t\t\t\tfloat: left;\r\n\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\tline-height: 20px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.forget {\r\n\t\t\t\t\tfloat: right;\r\n\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\tmargin: 0 50px 0 0;\r\n\t\t\t\t\tline-height: 20px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.login_button {\r\n\t\t\t\t\twidth: 350px;\r\n\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\tmargin: 0 80px 0 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\n"]}]}