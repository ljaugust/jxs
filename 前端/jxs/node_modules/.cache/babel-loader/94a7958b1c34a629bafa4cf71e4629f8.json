{"remainingRequest":"D:\\HBuilderX 项目\\jxs\\node_modules\\babel-loader\\lib\\index.js!D:\\HBuilderX 项目\\jxs\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HBuilderX 项目\\jxs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderX 项目\\jxs\\src\\components\\cart\\Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderX 项目\\jxs\\src\\components\\cart\\Cart.vue","mtime":1588730921866},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport API from \"../../api/api_cart\";\nexport default {\n  created: function created() {\n    this.username = this.$store.getters.username;\n  },\n  data: function data() {\n    return {\n      navList: [{\n        name: '/home',\n        navItem: '首页'\n      }, {\n        name: '/sort',\n        navItem: '水果分类'\n      }, {\n        name: '/login',\n        navItem: '水果礼盒'\n      }, {\n        name: '/order',\n        navItem: '我的订单'\n      }, {\n        name: '/cart',\n        navItem: '购物车'\n      }],\n      tableData: [],\n      multipleSelection: [],\n      selectData: [],\n      selectRow: [],\n      user: 'hhh',\n      showSum: true,\n      dialogTableVisible: false,\n      ann: 0,\n      amm: 0,\n      payway: 1,\n      address: '',\n      name: '',\n      phone: '',\n      username: ''\n    };\n  },\n  methods: {\n    logout: function logout() {\n      var _this = this;\n\n      this.$confirm('确认退出吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this.loading = true;\n\n        _this.$store.commit('removeToken');\n\n        _this.$store.commit('removeUser');\n\n        _this.$store.commit('removeUserName');\n\n        _this.$router.go('/login');\n      }).catch(function () {\n        _this.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    },\n    getSummaries: function getSummaries(param) {\n      var that = this;\n      var columns = param.columns,\n          data = param.data;\n      var sums = [];\n      columns.forEach(function (column, index) {\n        if (index === 0) {\n          sums[index] = '总价';\n          sums[0] = '合计';\n          return;\n        } else if (index === 3) {\n          var an = 0;\n          Object.keys(data).forEach(function (key) {\n            if (that.selectRow.includes(Number(key))) {\n              an += data[key].count;\n            }\n\n            sums[3] = '一共 ' + an + ' 个';\n            that.ann = an;\n            return;\n          });\n        } else if (index === 5) {\n          var am = 0;\n          Object.keys(data).forEach(function (key) {\n            if (that.selectRow.includes(Number(key))) {\n              am += data[key].totalmoney;\n            }\n\n            sums[5] = '共 ' + am + ' 元';\n            that.amm = am;\n            return;\n          });\n        }\n      });\n      return sums;\n    },\n    handleSelect: function handleSelect(key, keyPath) {\n      console.log(key, keyPath);\n    },\n    handleDelete: function handleDelete(index, row) {\n      var _this2 = this;\n\n      var param = [];\n      param.push(row.cartid);\n      this.loading = false;\n      API.delCart(param).then(function (res) {\n        if (res == 'success') {\n          _this2.search();\n\n          _this2.showSum = false;\n\n          _this2.$nextTick().then(function () {\n            _this2.showSum = true;\n          });\n        }\n      });\n    },\n    handleChange: function handleChange(value, rows) {\n      var tm = value * rows.siteprice;\n      rows.totalmoney = tm;\n      rows.count = value;\n    },\n    toggleSelection: function toggleSelection() {\n      this.$refs.multipleTable.clearSelection();\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      var _this3 = this;\n\n      this.selectData = val;\n      var p = {\n        data: this.$refs.multipleTable.data\n      };\n      this.showSum = false;\n      this.$nextTick().then(function () {\n        _this3.showSum = true;\n      });\n    },\n    rowstyle: function rowstyle(_ref) {\n      var row = _ref.row,\n          rowIndex = _ref.rowIndex;\n\n      if (this.selectRow.includes(rowIndex)) {\n        return {\n          'background-color': '#F0FFFF'\n        };\n      }\n    },\n    confirmOrder: function confirmOrder() {\n      if (this.selectRow.length == 0) {\n        this.$message({\n          message: '未选择商品',\n          type: 'warning'\n        });\n      } else {\n        this.dialogTableVisible = true;\n      }\n    },\n    allbuy: function allbuy() {\n      var _this4 = this;\n\n      if (this.name == '' || this.phone == '' || this.address == '') {\n        this.$message({\n          message: '请填写完整信息',\n          type: 'warning'\n        });\n      } else {\n        var data = this.$refs.multipleTable.data;\n        var p = [];\n        this.loading = false;\n        Object.keys(data).forEach(function (key) {\n          if (_this4.selectRow.includes(Number(key))) {\n            p.push(data[key]);\n          }\n        });\n        var param = {\n          cart: p,\n          payway: this.payway,\n          address: this.address,\n          count: this.ann,\n          allMoney: this.amm,\n          name: this.name,\n          phone: this.phone\n        };\n        API.buy(param).then(function (res) {\n          if (res == 'success') {\n            _this4.$confirm('购买成功！', '提示', {\n              confirmButtonText: '确定',\n              type: 'success'\n            }).then(function () {\n              _this4.$router.push('/order');\n            });\n          }\n        });\n      }\n    },\n    search: function search() {\n      var that = this;\n      console.log('ckID', Number(that.$store.getters.myuser));\n      var params = {\n        userId: Number(that.$store.getters.myuser)\n      };\n      API.findcart(params).then(function (res) {\n        that.tableData = res.data;\n      }).catch(function (error) {\n        console.log('error');\n      });\n    }\n  },\n  watch: {\n    selectData: function selectData(data) {\n      var _this5 = this;\n\n      this.selectRow = [];\n\n      if (data.length > 0) {\n        data.forEach(function (item, index) {\n          _this5.selectRow.push(_this5.tableData.indexOf(item));\n        });\n      }\n    },\n    tableData: {\n      handler: function handler(newValue, oldValue) {\n        this.tableData = newValue;\n      },\n      deep: true\n    }\n  },\n  mounted: function mounted() {\n    this.search();\n  }\n};",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"container\">\r\n\t\t<div class=\"top_container\">\r\n\t\t\t<div class=\"top\">\r\n\t\t\t\t<div class=\"top_left\">\r\n\t\t\t\t\t<el-button type=\"text\" @click=\"logout\">退出</el-button>\r\n\t\t\t\t\t<el-divider direction=\"vertical\"></el-divider>\r\n\t\t\t\t\t<el-link href=\"\" target=\"_blank\">欢迎你 {{ username }}</el-link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"top_right\"><span>水果订购热线：15521508095（林先生）</span></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"search\">\r\n\t\t\t<div class=\"search_total\">\r\n\t\t\t\t<div class=\"search_left\">\r\n\t\t\t\t\t<div class=\"logo\"><img src=\"../../assets/jxs.png\" class=\"logo_image\" /></div>\r\n\t\t\t\t\t<div class=\"find\">\r\n\t\t\t\t\t\t<el-input class=\"search_input\" placeholder=\"\" prefix-icon=\"el-icon-search\"></el-input>\r\n\t\t\t\t\t\t<el-button class=\"search_button\" type=\"primary\" icon=\"el-icon-search\">搜索</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"search_right\">\r\n\t\t\t\t\t<div class=\"navigation\">\r\n\t\t\t\t\t\t<el-menu :default-active=\"this.$route.path\" class=\"navigation_menu\" router mode=\"horizontal\">\r\n\t\t\t\t\t\t\t<el-menu-item class=\"navigation_menu_item\" v-for=\"(item, i) in navList\" :key=\"i\" :index=\"item.name\">{{ item.navItem }}</el-menu-item>\r\n\t\t\t\t\t\t</el-menu>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"cartlist\">\r\n\t\t\t<el-table\r\n\t\t\t\t:header-cell-style=\"{ background: '#BEBEBE', color: '#606266', 'text-align': 'center' }\"\r\n\t\t\t\t:cell-style=\"{ 'text-align': 'center' }\"\r\n\t\t\t\tborder\r\n\t\t\t\tref=\"multipleTable\"\r\n\t\t\t\t:data=\"tableData\"\r\n\t\t\t\ttooltip-effect=\"light\"\r\n\t\t\t\t@selection-change=\"handleSelectionChange\"\r\n\t\t\t\t:summary-method=\"getSummaries\"\r\n\t\t\t\t:show-summary=\"showSum\"\r\n\t\t\t\t:row-style=\"rowstyle\"\r\n\t\t\t>\r\n\t\t\t\t<el-table-column type=\"selection\" width=\"80\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"fruitnum\" label=\"水果编号\" width=\"100\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{ scope.row.fruitnum }}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"fruitname\" label=\"水果名称\" width=\"350\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{ scope.row.fruitname }}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"count\" label=\"订购数量\" show-overflow-tooltip>\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<div @click.stop>\r\n\t\t\t\t\t\t\t<el-input-number\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tv-model=\"scope.row.count\"\r\n\t\t\t\t\t\t\t\t@change=\"handleChange($event, scope.row)\"\r\n\t\t\t\t\t\t\t\t:step=\"1\"\r\n\t\t\t\t\t\t\t\t:min=\"1\"\r\n\t\t\t\t\t\t\t\t:max=\"10\"\r\n\t\t\t\t\t\t\t\tlabel=\"描述文字\"\r\n\t\t\t\t\t\t\t></el-input-number>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"siteprice\" label=\"单价(元/份)\" show-overflow-tooltip>\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{ scope.row.siteprice }}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"totalmoney\" label=\"金额\" show-overflow-tooltip>\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{ scope.row.totalmoney }}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"100\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"btn\">\r\n\t\t\t\t<div class=\"not_select\"><el-button @click=\"toggleSelection()\">取消选择</el-button></div>\r\n\t\t\t\t<div class=\"buy\"><el-button @click=\"confirmOrder()\">提交订单</el-button></div>\r\n\t\t\t</div>\r\n\t\t\t<el-dialog title=\"确认订单\" :visible.sync=\"dialogTableVisible\" width=\"30%\" center :close-on-click-modal=\"false\" :showClose=\"false\">\r\n\t\t\t\t<el-row class=\"dia_row\">\r\n\t\t\t\t\t<el-col>\r\n\t\t\t\t\t\t<span>一共选择 {{ ann }} 件商品，共计 {{ amm }} 元。</span>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row class=\"dia_row\">\r\n\t\t\t\t\t<el-col :span=\"8\"><span>请输入收货人姓名</span></el-col>\r\n\t\t\t\t\t<el-col :span=\"16\"><el-input placeholder=\"请输入收货人姓名\" v-model=\"name\" clearable></el-input></el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row class=\"dia_row\">\r\n\t\t\t\t\t<el-col :span=\"8\"><span>请输入收货人联系电话</span></el-col>\r\n\t\t\t\t\t<el-col :span=\"16\"><el-input placeholder=\"请输入收货人联系电话\" v-model=\"phone\" clearable></el-input></el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row class=\"dia_row\">\r\n\t\t\t\t\t<el-col :span=\"8\"><span>请输入收货地址</span></el-col>\r\n\t\t\t\t\t<el-col :span=\"16\"><el-input placeholder=\"请输入收货地址\" v-model=\"address\" clearable></el-input></el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row class=\"dia_row\">\r\n\t\t\t\t\t<el-col :span=\"8\"><span>请选择支付方式</span></el-col>\r\n\t\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t\t<el-radio-group v-model=\"payway\">\r\n\t\t\t\t\t\t\t<el-radio :label=\"1\">微信支付</el-radio>\r\n\t\t\t\t\t\t\t<el-radio :label=\"2\">支付宝支付</el-radio>\r\n\t\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button @click.stop=\"dialogTableVisible = false\">取 消</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click.stop=\"allbuy()\">确 定</el-button>\r\n\t\t\t\t</el-row>\r\n\t\t\t</el-dialog>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../../api/api_cart';\r\nexport default {\r\n\tcreated() {\r\n\t\tthis.username = this.$store.getters.username;\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnavList: [\r\n\t\t\t\t{ name: '/home', navItem: '首页' },\r\n\t\t\t\t{ name: '/sort', navItem: '水果分类' },\r\n\t\t\t\t{ name: '/login', navItem: '水果礼盒' },\r\n\t\t\t\t{ name: '/order', navItem: '我的订单' },\r\n\t\t\t\t{ name: '/cart', navItem: '购物车' }\r\n\t\t\t],\r\n\t\t\ttableData: [],\r\n\t\t\tmultipleSelection: [],\r\n\t\t\tselectData: [],\r\n\t\t\tselectRow: [],\r\n\t\t\tuser: 'hhh',\r\n\t\t\tshowSum: true,\r\n\t\t\tdialogTableVisible: false,\r\n\t\t\tann: 0,\r\n\t\t\tamm: 0,\r\n\t\t\tpayway: 1,\r\n\t\t\taddress: '',\r\n\t\t\tname: '',\r\n\t\t\tphone: '',\r\n\t\t\tusername:''\r\n\t\t};\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tlogout() {\r\n\t\t\tthis.$confirm('确认退出吗?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t\tthis.$store.commit('removeToken');\r\n\t\t\t\t\tthis.$store.commit('removeUser');\r\n\t\t\t\t\tthis.$store.commit('removeUserName');\r\n\t\t\t\t\tthis.$router.go('/login');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '已取消'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tgetSummaries(param) {\r\n\t\t\tlet that = this;\r\n\t\t\tconst { columns, data } = param;\r\n\t\t\tconst sums = [];\r\n\r\n\t\t\tcolumns.forEach((column, index) => {\r\n\t\t\t\tif (index === 0) {\r\n\t\t\t\t\tsums[index] = '总价';\r\n\t\t\t\t\tsums[0] = '合计';\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (index === 3) {\r\n\t\t\t\t\tlet an = 0;\r\n\t\t\t\t\tObject.keys(data).forEach(key => {\r\n\t\t\t\t\t\tif (that.selectRow.includes(Number(key))) {\r\n\t\t\t\t\t\t\tan += data[key].count;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsums[3] = '一共 ' + an + ' 个';\r\n\t\t\t\t\t\tthat.ann = an;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (index === 5) {\r\n\t\t\t\t\tlet am = 0;\r\n\t\t\t\t\tObject.keys(data).forEach(key => {\r\n\t\t\t\t\t\tif (that.selectRow.includes(Number(key))) {\r\n\t\t\t\t\t\t\tam += data[key].totalmoney;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsums[5] = '共 ' + am + ' 元';\r\n\t\t\t\t\t\tthat.amm = am;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn sums;\r\n\t\t},\r\n\r\n\t\thandleSelect(key, keyPath) {\r\n\t\t\tconsole.log(key, keyPath);\r\n\t\t},\r\n\t\thandleDelete(index, row) {\r\n\t\t\tlet param = [];\r\n\t\t\tparam.push(row.cartid);\r\n\t\t\tthis.loading = false;\r\n\t\t\tAPI.delCart(param).then(res => {\r\n\t\t\t\tif (res == 'success') {\r\n\t\t\t\t\tthis.search();\r\n\t\t\t\t\tthis.showSum = false;\r\n\t\t\t\t\tthis.$nextTick().then(() => {\r\n\t\t\t\t\t\tthis.showSum = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\thandleChange(value, rows) {\r\n\t\t\tlet tm = value * rows.siteprice;\r\n\t\t\trows.totalmoney = tm;\r\n\t\t\trows.count = value;\r\n\t\t},\r\n\t\ttoggleSelection() {\r\n\t\t\tthis.$refs.multipleTable.clearSelection();\r\n\t\t},\r\n\t\thandleSelectionChange(val) {\r\n\t\t\tthis.selectData = val;\r\n\t\t\tlet p = {\r\n\t\t\t\tdata: this.$refs.multipleTable.data\r\n\t\t\t};\r\n\t\t\tthis.showSum = false;\r\n\t\t\tthis.$nextTick().then(() => {\r\n\t\t\t\tthis.showSum = true;\r\n\t\t\t});\r\n\t\t},\r\n\t\trowstyle({ row, rowIndex }) {\r\n\t\t\tif (this.selectRow.includes(rowIndex)) {\r\n\t\t\t\treturn { 'background-color': '#F0FFFF' };\r\n\t\t\t}\r\n\t\t},\r\n\t\tconfirmOrder() {\r\n\t\t\tif (this.selectRow.length == 0) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '未选择商品',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.dialogTableVisible = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tallbuy() {\r\n\t\t\tif (this.name == '' || this.phone == '' || this.address == '') {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '请填写完整信息',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tlet data = this.$refs.multipleTable.data;\r\n\t\t\t\tlet p = [];\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tObject.keys(data).forEach(key => {\r\n\t\t\t\t\tif (this.selectRow.includes(Number(key))) {\r\n\t\t\t\t\t\tp.push(data[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\tcart: p,\r\n\t\t\t\t\tpayway: this.payway,\r\n\t\t\t\t\taddress: this.address,\r\n\t\t\t\t\tcount: this.ann,\r\n\t\t\t\t\tallMoney: this.amm,\r\n\t\t\t\t\tname: this.name,\r\n\t\t\t\t\tphone: this.phone\r\n\t\t\t\t};\r\n\t\t\t\tAPI.buy(param).then(res => {\r\n\t\t\t\t\tif (res == 'success') {\r\n\t\t\t\t\t\tthis.$confirm('购买成功！', '提示', {\r\n\t\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\tthis.$router.push('/order');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tsearch: function() {\r\n\t\t\tlet that = this;\r\n\t\t\tconsole.log('ckID', Number(that.$store.getters.myuser));\r\n\t\t\tlet params = {\r\n\t\t\t\tuserId: Number(that.$store.getters.myuser)\r\n\t\t\t};\r\n\r\n\t\t\tAPI.findcart(params)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthat.tableData = res.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.log('error');\r\n\t\t\t\t});\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tselectData(data) {\r\n\t\t\tthis.selectRow = [];\r\n\t\t\tif (data.length > 0) {\r\n\t\t\t\tdata.forEach((item, index) => {\r\n\t\t\t\t\tthis.selectRow.push(this.tableData.indexOf(item));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\ttableData: {\r\n\t\t\thandler(newValue, oldValue) {\r\n\t\t\t\tthis.tableData = newValue;\r\n\t\t\t},\r\n\t\t\tdeep: true\r\n\t\t}\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.search();\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container {\r\n\tposition: absolute;\r\n\ttop: 0px;\r\n\tbottom: 0px;\r\n\twidth: 100%;\r\n\r\n\t.top_container {\r\n\t\twidth: 100%;\r\n\t\theight: 30px;\r\n\t\tbackground: #f3f3f3;\r\n\r\n\t\t.top {\r\n\t\t\twidth: 1200px;\r\n\t\t\tmargin: 0 auto;\r\n\t\t\theight: 30px;\r\n\r\n\t\t\t.top_left {\r\n\t\t\t\tfloat: left;\r\n\t\t\t\theight: 30px;\r\n\t\t\t\tline-height: 30px;\r\n\t\t\t\tdisplay: inline;\r\n\t\t\t\tmargin: 0 0 0 20px;\r\n\t\t\t}\r\n\r\n\t\t\t.top_right {\r\n\t\t\t\tfloat: right;\r\n\t\t\t\theight: 30px;\r\n\t\t\t\tline-height: 30px;\r\n\t\t\t\tdisplay: inline;\r\n\t\t\t\tmargin: 0 20px 0 0;\r\n\t\t\t\tcolor: red;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.search {\r\n\t\twidth: 100%;\r\n\t\tborder-bottom: 5px solid #098a30;\r\n\r\n\t\t.search_total {\r\n\t\t\twidth: 1200px;\r\n\t\t\tmargin: 0 auto;\r\n\t\t\theight: 120px;\r\n\t\t\tpadding: 10px 0 0 0;\r\n\r\n\t\t\t.search_left {\r\n\t\t\t\tfloat: left;\r\n\t\t\t\tmargin-right: 50px;\r\n\r\n\t\t\t\t.logo {\r\n\t\t\t\t\tmargin-right: 50px;\r\n\t\t\t\t\tfloat: left;\r\n\r\n\t\t\t\t\t.logo_image {\r\n\t\t\t\t\t\twidth: 218px;\r\n\t\t\t\t\t\theight: 95px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.find {\r\n\t\t\t\t\tfloat: right;\r\n\t\t\t\t\tmargin-top: 30px;\r\n\r\n\t\t\t\t\t.search_input {\r\n\t\t\t\t\t\twidth: 265px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.search_right {\r\n\t\t\t\tfloat: right;\r\n\r\n\t\t\t\t.navigation {\r\n\t\t\t\t\twidth: auto;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tmargin-top: 20px;\r\n\t\t\t\t\tfont-size: 20px;\r\n\r\n\t\t\t\t\t.navigation_menu_item {\r\n\t\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.navigation_menu_item.is-active {\r\n\t\t\t\t\t\tcolor: #409eff;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.cartlist {\r\n\t\twidth: 100%;\r\n\t\tpadding: 20px;\r\n\r\n\t\t.el-table {\r\n\t\t\twidth: 1200px;\r\n\t\t\tmargin: 0 auto;\r\n\r\n\t\t\t/deep/ .el-table__body {\r\n\t\t\t\t/deep/ .el-table__row td {\r\n\t\t\t\t\tpadding: 10px 0;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttr:hover > td {\r\n\t\t\t\t\tbackground-color: rgba(0, 0, 0, 0) !important;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/deep/ .el-table__footer {\r\n\t\t\t\t/deep/ td {\r\n\t\t\t\t\tpadding: 10px 0;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.btn {\r\n\t\t\twidth: 1200px;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin: 20px auto;\r\n\r\n\t\t\t.not_select {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tmargin-right: 15px;\r\n\t\t\t}\r\n\t\t\t.buy {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.dia_row {\r\n\t\t\tpadding: 15px 0;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\tspan {\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\n"],"sourceRoot":"src/components/cart"}]}