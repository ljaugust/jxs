{"remainingRequest":"D:\\HBuilderX 项目\\jxs\\node_modules\\babel-loader\\lib\\index.js!D:\\HBuilderX 项目\\jxs\\src\\router\\index.js","dependencies":[{"path":"D:\\HBuilderX 项目\\jxs\\src\\router\\index.js","mtime":1588731599817},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderX 项目\\jxs\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.starts-with\";\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport store from \"../vuex/store\";\nimport Home from '@/components/Home';\nimport Show from '@/components/show/Show';\nimport Sort from '@/components/sort/Sort';\nimport Admin from '@/components/admin/Admin';\nimport AdminLogin from '@/components/admin/adminLogin';\nimport Cart from '@/components/cart/Cart';\nimport Order from '@/components/cart/Order';\n\nvar Login = function Login(resolve) {\n  return require(['@/components/Login'], resolve);\n};\n\nVue.use(Router);\nvar router = new Router({\n  mode: 'history',\n  routes: [{\n    path: '/',\n    redirect: '/login'\n  }, {\n    path: '/login',\n    name: '登录',\n    component: Login,\n    meta: {\n      title: '京鲜生--登录'\n    }\n  }, {\n    path: '/loginadmin',\n    name: '管理员登录',\n    component: AdminLogin,\n    meta: {\n      title: '京鲜生--管理员登录'\n    }\n  }, {\n    path: '/home',\n    name: '首页',\n    component: Home,\n    meta: {\n      title: '京鲜生--首页'\n    }\n  }, {\n    path: '/show',\n    name: '水果详情',\n    component: Show,\n    meta: {\n      title: '京鲜生--水果详情'\n    }\n  }, {\n    path: '/sort',\n    name: '水果分类',\n    component: Sort,\n    meta: {\n      title: '京鲜生--水果分类'\n    }\n  }, {\n    path: '/admincenter',\n    name: '后台管理',\n    component: Admin,\n    meta: {\n      title: '京鲜生--后台管理'\n    }\n  }, {\n    path: '/cart',\n    name: '购物车',\n    component: Cart,\n    meta: {\n      title: '京鲜生--购物车'\n    }\n  }, {\n    path: '/order',\n    name: '我的订单',\n    component: Order,\n    meta: {\n      title: '京鲜生--我的订单'\n    }\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  if (to.path.startsWith('/login')) {\n    store.commit('removeToken');\n    next();\n  } else {\n    var token = store.getters.token;\n\n    if (!token) {\n      next({\n        path: '/login',\n        query: {\n          redirect: to.fullPath //将跳转的路由path作为参数，登录成功后跳转到该路由\n\n        }\n      });\n    } else {\n      next();\n    }\n  }\n});\nexport default router;",{"version":3,"sources":["D:/HBuilderX 项目/jxs/src/router/index.js"],"names":["Vue","Router","store","Home","Show","Sort","Admin","AdminLogin","Cart","Order","Login","resolve","require","use","router","mode","routes","path","redirect","name","component","meta","title","beforeEach","to","from","next","startsWith","commit","token","getters","query","fullPath"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport store from \"../vuex/store\"\r\n\r\nimport Home from '@/components/Home'\r\nimport Show from '@/components/show/Show'\r\nimport Sort from '@/components/sort/Sort'\r\nimport Admin from '@/components/admin/Admin'\r\nimport AdminLogin from '@/components/admin/adminLogin'\r\nimport Cart from '@/components/cart/Cart'\r\nimport Order from '@/components/cart/Order'\r\n\r\n\r\nconst Login = resolve => require(['@/components/Login'], resolve)\r\nVue.use(Router)\r\n\r\nlet router = new Router({\r\n\tmode: 'history',\r\n\troutes: [{\r\n\t\t\tpath: '/',\r\n\t\t\tredirect: '/login'\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: '/login',\r\n\t\t\tname: '登录',\r\n\t\t\tcomponent: Login,\r\n\t\t\tmeta: {\r\n\t\t\t\ttitle: '京鲜生--登录'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: '/loginadmin',\r\n\t\t\tname: '管理员登录',\r\n\t\t\tcomponent: AdminLogin,\r\n\t\t\tmeta: {\r\n\t\t\t\ttitle: '京鲜生--管理员登录'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: '/home',\r\n\t\t\tname: '首页',\r\n\t\t\tcomponent: Home,\r\n\t\t\tmeta: {\r\n\t\t\t\ttitle: '京鲜生--首页'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: '/show',\r\n\t\t\tname: '水果详情',\r\n\t\t\tcomponent: Show,\r\n\t\t\tmeta: {\r\n\t\t\t\ttitle: '京鲜生--水果详情'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: '/sort',\r\n\t\t\tname: '水果分类',\r\n\t\t\tcomponent: Sort,\r\n\t\t\tmeta: {\r\n\t\t\t\ttitle: '京鲜生--水果分类'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: '/admincenter',\r\n\t\t\tname: '后台管理',\r\n\t\t\tcomponent: Admin,\r\n\t\t\tmeta: {\r\n\t\t\t\ttitle: '京鲜生--后台管理'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: '/cart',\r\n\t\t\tname: '购物车',\r\n\t\t\tcomponent: Cart,\r\n\t\t\tmeta: {\r\n\t\t\t\ttitle: '京鲜生--购物车'\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: '/order',\r\n\t\t\tname: '我的订单',\r\n\t\t\tcomponent: Order,\r\n\t\t\tmeta: {\r\n\t\t\t\ttitle: '京鲜生--我的订单'\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n\tif (to.path.startsWith('/login')) {\r\n\t\tstore.commit('removeToken');\r\n\r\n\t\tnext();\r\n\t} else {\r\n\t\tlet token = store.getters.token;\r\n\t\tif (!token) {\r\n\t\t\tnext({\r\n\t\t\t\tpath: '/login',\r\n\t\t\t\tquery: {\r\n\t\t\t\t\tredirect: to.fullPath //将跳转的路由path作为参数，登录成功后跳转到该路由\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tnext()\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport default router\n"]}]}